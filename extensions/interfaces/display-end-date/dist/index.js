import{defineInterface as e}from"@directus/extensions-sdk";import{defineComponent as t,computed as n,openBlock as a,createElementBlock as r,createElementVNode as d,createCommentVNode as i}from"vue";var o=e({id:"display-end-date",name:"Display End Date",icon:"event",description:"Date picker for setting when content should stop being displayed. Posts with end date in the past will be filtered out from API queries.",component:()=>Promise.resolve().then(function(){return g}),options:[{field:"includeTime",name:"Include Time",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Include time in date picker"}},schema:{default_value:!1}}],types:["dateTime","timestamp","date"]});const l={class:"display-end-date"},u=["type","value","disabled","readonly","placeholder","min"],s={key:0,class:"warning-message"};var p=t({__name:"display-end-date",props:{modelValue:{default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{default:"Select display end date"},includeTime:{type:Boolean,default:!1},minDate:{default:void 0}},emits:["update:modelValue","input"],setup(e,{emit:t}){const o=e,p=t,c=n(()=>o.includeTime?"datetime-local":"date"),m=n(()=>{if(!o.modelValue)return"";try{const e=new Date(o.modelValue);if(isNaN(e.getTime()))return"";if(o.includeTime){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0");return`${t}-${n}-${a}T${r}:${String(e.getMinutes()).padStart(2,"0")}`}{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0");return`${t}-${n}-${String(e.getDate()).padStart(2,"0")}`}}catch{return""}}),f=n(()=>{if(!o.modelValue)return!1;try{const e=new Date(o.modelValue);return e<new Date}catch{return!1}});function g(e){const t=e.target.value;if(!t)return p("update:modelValue",null),void p("input",e);try{const e=new Date(t);isNaN(e.getTime())||p("update:modelValue",e.toISOString())}catch{}p("input",e)}function v(e){p("input",e)}return(t,n)=>(a(),r("div",l,[d("input",{type:c.value,value:m.value,disabled:e.disabled,readonly:e.readonly,placeholder:e.placeholder,min:e.minDate,onInput:g,onBlur:v,class:"input"},null,40,u),f.value?(a(),r("div",s,[...n[0]||(n[0]=[d("small",null,"⚠️ This date has passed. Posts with expired end dates will not appear in API queries.",-1)])])):i("v-if",!0)]))}}),c=[],m=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,a=!0===t.prepend?"prepend":"append",r=!0===t.singleTag,d="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(r){var i=c.indexOf(d);-1===i&&(i=c.push(d)-1,m[i]={}),n=m[i]&&m[i][a]?m[i][a]:m[i][a]=o()}else n=o();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function o(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),r=0;r<n.length;r++)e.setAttribute(n[r],t.attributes[n[r]]);var i="prepend"===a?"afterbegin":"beforeend";return d.insertAdjacentElement(i,e),e}}("\n.display-end-date[data-v-e7a75ce6] {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 8px;\n}\n.input[data-v-e7a75ce6] {\r\n\twidth: 100%;\r\n\tpadding: 8px 12px;\r\n\tborder: 1px solid var(--theme--form--field--input--border-color);\r\n\tborder-radius: var(--theme--border-radius);\r\n\tbackground-color: var(--theme--form--field--input--background);\r\n\tcolor: var(--theme--form--field--input--foreground);\r\n\tfont-size: 14px;\r\n\tfont-family: var(--theme--fonts--sans--font-family);\n}\n.input[data-v-e7a75ce6]:focus {\r\n\toutline: 2px solid var(--theme--primary);\r\n\toutline-offset: 2px;\r\n\tborder-color: var(--theme--primary);\n}\n.input[data-v-e7a75ce6]:disabled,\r\n.input[data-v-e7a75ce6]:readonly {\r\n\tbackground-color: var(--theme--form--field--input--background-subdued);\r\n\tcursor: not-allowed;\n}\n.warning-message[data-v-e7a75ce6] {\r\n\tpadding: 6px 8px;\r\n\tbackground-color: var(--theme--warning-background, #fff4e6);\r\n\tborder: 1px solid var(--theme--warning-accent, #ffb020);\r\n\tborder-radius: var(--theme--border-radius);\r\n\tcolor: var(--theme--warning-foreground, #8a6914);\r\n\tfont-size: 12px;\n}\r\n",{});var f=((e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n})(p,[["__scopeId","data-v-e7a75ce6"],["__file","display-end-date.vue"]]),g=Object.freeze({__proto__:null,default:f});export{o as default};
